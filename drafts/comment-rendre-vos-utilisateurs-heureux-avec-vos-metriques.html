<!DOCTYPE html>
<html lang="fr">
  <head>
        <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=endge, chrome=IE8" />
    <meta name="viewport" content="initial-scale=1.0, width=device-width, user-scalable=no" />
    <title>Comment rendre vos utilisateurs heureux (avec vos métriques) — Blog bloquant</title>
    <!--[if lte IE 8]><script type="text/javascript" src="https://www.dericbourg.net/theme/js/html5shiv.js"></script><![endif]-->
    <link rel="stylesheet" type="text/css" href="https://www.dericbourg.net/theme/css/skeleton.css" />
    <link rel="stylesheet" type="text/css" href="https://www.dericbourg.net/theme/css/theme.css" />
    <link rel="shortcut icon" type="image/png" href="https://www.dericbourg.net/favicon.png" />
    <!--[if lte IE 8]><link rel="shortcut icon" type="image/x-icon" href="https://www.dericbourg.net/favicon.ico" /><![endif]-->
    <link rel="alternate" type="application/atom+xml"
                           title="Blog bloquant — Flux Atom"
                           href="https://www.dericbourg.net/" /> 

    <meta name="author"   content="Alban Dericbourg" />
    <meta name="keywords" content="sre, métriques, expérience utilisateur, bonnes pratiques" />
    <link rel="stylesheet" media="not print" type="text/css" href="https://www.dericbourg.net/theme/css/pygments.css" /> 
  </head>
  <body>
    <div id="page">
      <header id="page-head">
        <h1>
          <a href="https://www.dericbourg.net/index.html">Blog bloquant</a>
        </h1>
      </header>
      
      <div id="page-body">
        <article class="post" id="page-main" role="main">
      <header class="post-header">
        <h1>
          <a rel="bookmark"
             href="https://www.dericbourg.net/drafts/comment-rendre-vos-utilisateurs-heureux-avec-vos-metriques.html"
             title="Lien permanent vers «Comment rendre vos utilisateurs heureux (avec vos métriques)»">
             Comment rendre vos utilisateurs heureux (avec vos métriques)
          </a>
        </h1>
        <div class="meta">
<!-- includes/article_meta.html -->
            Le <time datetime="2100-01-01T00:00:00+01:00">Fri 01 January 2100</time>
            dans «<a href="https://www.dericbourg.net/category/blog.html">Blog</a>» 
            par <a href="https://www.dericbourg.net/author/alban-dericbourg.html">Alban Dericbourg</a>              <br />Mots-clés:              <a rel="tag" href="https://www.dericbourg.net/tag/sre.html">sre</a>,               <a rel="tag" href="https://www.dericbourg.net/tag/metriques.html">métriques</a>,               <a rel="tag" href="https://www.dericbourg.net/tag/experience-utilisateur.html">expérience utilisateur</a>,               <a rel="tag" href="https://www.dericbourg.net/tag/bonnes-pratiques.html">bonnes pratiques</a>        </div>
      </header>
      <div class="post-content"> 
        <p>Ça y est ! Mon application est déployée en production et reçoit du trafic ! C'est maintenant
que les choses sérieuses commencent : les utilisateurs seront les meilleurs ambassadeurs pour
en faire la promotion... ou pour en dire leur déception. Ce serait utile d'avoir des retours
sur leur perception, de pouvoir mesurer leur expérience mais je n'ai pas le budget pour lancer
une étude.</p>
<p>Je fais donc avec les moyens du bord, et ils sont déjà riches ! Et si je commençais par utiliser
mes métriques applicatives ?</p>
<h2>Adopter de justes proportions</h2>
<p>En me mettant à la place de mes utilisateurs, je me dis que ce qui peut arriver de pire serait
de tomber sur une erreur bloquante. C'est quelque chose que je peux mesurer en utilisant  les
codes HTTP des réponses de mon application.</p>
<p>Je ne suis pas parfait : je sais qu'il y en a et qu'il risque d'y en avoir toujours, ne serait-ce
que parce que mon infrastructure n'est pas parfaite et que certains composants peuvent parfois
tomber. Je ne vise pas le zéro absolu mais j'aimerais en avoir le moins possible. Quand soudain,
j'observe une augmentation exponentielle du nombre « d'erreurs 500 » !</p>
<p><img alt="Augmentation exponentielle du nombre de réponses HTTP avec un statut 500" class="center" src="/images/utilisateurs_heureux_metriques/500_exp_increase.png"></p>
<p>Pourquoi cette augmentation subite ? Je n'ai pourtant pas déployé de nouvelle version depuis
quelques jours. Je commence à paniquer. En regardant les logs, ce sont les mêmes erreurs que
d'habitude. Je sais bien que j'aurais dû corriger ça avant mais il y en avait peu, ça n'était
pas prioritaire. Là, c'est l'explosion !</p>
<p>L'explosion, vraiment ? Y en a-t-il vraiment plus qu'avant ? En quantité, c'est certain, mais
qu'en est-il <em>proportionnellement</em> au trafic de mon application ?</p>
<ul>
<li>Si cette augmentation du nombre d'erreur s'observe à nombre constant de requêtes, il y a
  effectivement un problème dont je veux être alerté, et vite.</li>
<li>En revanche, si le nombre de requêtes varie dans les mêmes proportions que le nombre d'erreurs,
  cela semble plus cohérent. Être réveillé la nuit par une alerte qui indique que le trafic a
  augmenté mais tout est normal me mettrait de mauvaise humeur.</li>
</ul>
<p><img alt="Deux profils du nombre de requêtes associé : nombre constant et croissance exponentielle" class="center" src="/images/utilisateurs_heureux_metriques/500_over_total_request.png"></p>
<p>Une façon d'éviter cette possible confusion est d'exprimer les indicateurs comme une <em>proportion</em>
<em>d'événements valides qui étaient bons</em>. Si cette formulation peut sembler abstraite, sa mise en
place est beaucoup plus simple. Dans notre exemple d'un système répondant à des requêtes, on
peut mesurer la proportion de requêtes ayant abouti à une réponse de code HTTP de classe 200, 300
ou 400 par rapport au nombre total de requêtes.</p>
<blockquote>
<p><em>Pourquoi prendre les codes HTTP de classe 400 comme des succès ?</em></p>
<p>S'ils sont perçus comme une erreur vis-à-vis de votre client, il représentent en réalité un
cas prévu qui correspond à une action non-autorisée de votre utilisateur. Essayer d'accéder à
une page nécessitant une authentification sans s'être préalablement connecté n'est pas autorisé :
retourner autre chose qu'un code HTTP 403 serait probablement une erreur.</p>
</blockquote>
<h2>Prendre le temps, et le bon</h2>
<p>J'ai compris la leçon et j'ai exprimé une métrique importante de mon application comme une
proportion. Le système d'alerte se comporte comme une guirlande de Noël. L'alerte sonne, tout
est rouge, et le temps que je regarde, tout est revenu à la normale. Je pars me faire un café
et en revenant, l'alerte a encore oscillé trois fois entre « tout va bien » et « tout brûle ».</p>
<p>En regardant la courbe, je reste circonspect.</p>
<p><img alt="Courbe d'une métrique quelconque présentant une forte variance sur des périodes de temps très courtes" class="center" src="/images/utilisateurs_heureux_metriques/whatever_short_time_window.png"></p>
<p>Je ne vois rien sur cette courbe. La variance est trop grande, je ne peux en dégager aucune tendance
à l'œil nu. Une solution à cela est de lisser par une fonction d'agrégation sur une fenêtre du temps
plus large que la période d'échantillonnage de vos métriques.</p>
<p><img alt="Courbe d'une métrique quelconque présentant une forte variance sur des périodes de temps très courtes avec en superposition la moyenne glissante sur quelques minutes, beaucoup plus stable" class="center" src="/images/utilisateurs_heureux_metriques/whatever_long_time_window.png"></p>
<h2>Dites 33</h2>
<h2>Partez en voyage</h2>
<h2>C'est pas tout mais...</h2>
<p>pas révélateur de l'ux</p>
<blockquote>
<p>Cet article a également été décliné sous forme d'une présentation aux
<em>Human Talks</em> Paris le 14 janvier 2020 sous le titre
<a href="https://www.youtube.com/watch?v=gNMtIdWKfEg">How to make your users happy (with your metrics)</a>.</p>
</blockquote>
      </div>
      <footer class="post-footer">
        <div class="meta">
            Posté dans «<a href="https://www.dericbourg.net/category/blog.html">Blog</a>» 
            par <a href="https://www.dericbourg.net/author/alban-dericbourg.html">Alban Dericbourg</a><br />
            Mots-clés:  #<a href="https://www.dericbourg.net/tag/sre.html">sre</a> #<a href="https://www.dericbourg.net/tag/metriques.html">métriques</a> #<a href="https://www.dericbourg.net/tag/experience-utilisateur.html">expérience utilisateur</a> #<a href="https://www.dericbourg.net/tag/bonnes-pratiques.html">bonnes pratiques</a>        </div>
      </footer>
      <hr />
      <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'dericbourg'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
      </article> <!-- /#page-main -->

        <aside id="page-side">
          <!-- begin includes/sidebar.html -->
          <nav>
            <h3>Liens</h3>
            <ul>
              <li><a href="https://github.com/adericbourg">GitHub</a></li>
              <li><a href="https://www.linkedin.com/in/adericbourg/">LinkedIn</a></li>
              <li><a href="https://twitter.com/adericbourg">Twitter</a></li>
            </ul>
          </nav>
          <!-- end includes/sidebar.html --></aside> <!-- /#page-side -->
      </div>  <!-- /#page-body -->

      <footer id="page-foot">
        <p> Powered by <a href="http://pelican.readthedocs.org">Pelican</a></p>
      </footer>
    </div> <!-- /#page -->
  </body>
</html>